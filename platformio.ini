; PlatformIO Project Configuration File for Baltic Shoreline Monitor
; Meshtastic-style mesh networking with XIAO ESP32-S3 + Expansion Board

[platformio]
default_envs = seeed_xiao_esp32s3

[env:seeed_xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200

; Use default partition scheme (safer)
board_build.flash_mode = dio
board_build.flash_size = 8MB

lib_deps =
    ; Essential libraries for display and basic functionality
    olikraus/U8g2@^2.35.9
    jgromes/RadioLib@^7.0.0
    bblanchon/ArduinoJson@^7.0.0

[env:baltic_meshtastic]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200

; Configuration for ESP32-S3 with PSRAM
board_build.flash_mode = dio
board_build.flash_size = 8MB
build_flags = 
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_MODE=0
    -DARDUINO_USB_CDC_ON_BOOT=1
    -Ilib/BalticShorelineMonitor
    -DAPP_VERSION=\"2.0.0\"
    -DBALTIC_MESHTASTIC=1

lib_deps = 
    olikraus/U8g2@^2.35.9
    jgromes/RadioLib@^7.0.0
    bblanchon/ArduinoJson@^7.0.0

; Upload and monitor configuration
upload_protocol = esptool
upload_port = COM*
monitor_port = COM*
monitor_filters = 
    esp32_exception_decoder
    time

[env:simple_test]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200
build_flags = 
    -DARDUINO_USB_MODE=0
    -DARDUINO_USB_CDC_ON_BOOT=1
build_src_filter = +<simple_test.cpp> -<main.cpp> -<meshtastic_baltic.cpp>
upload_protocol = esptool
