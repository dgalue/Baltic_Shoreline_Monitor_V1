; PlatformIO Project Configuration File for Baltic Shoreline Monitor
; Solar-powered marine environmental monitoring buoy

[platformio]
default_envs = seeed_xiao_esp32s3

[env:seeed_xiao_esp32s3]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200

; Partition scheme to use more space
board_build.partitions = default_16MB.csv
board_build.flash_mode = qio

lib_deps =
    ; Core libraries
    mikalhart/TinyGPSPlus@^1.0.3
    thingpulse/ESP8266 and ESP32 OLED driver for SSD1306 displays@^4.4.1
    mathertel/OneButton@^2.6.1
    bblanchon/ArduinoJson@^7.0.4
    ; LoRa and radio
    jgromes/RadioLib@^7.1.2
    ; SD card support
    SD
    ; WiFi and networking (optional for configuration)
    WiFi
    WiFiClientSecure
    HTTPClient
    ; Time handling
    ESP32Time
    ; Crypto for secure messaging
    rweather/Crypto@^0.4.0

build_flags =
    -Wno-missing-field-initializers
    -Wno-format
    -Ilib/BalticShorelineMonitor
    ; ESP32-S3 configuration
    -DARCH_ESP32S3
    -DBOARD_HAS_PSRAM
    -DHAS_GPS=1
    -DHAS_LORA=1
    -DUSE_SX1262=1
    ; Application version
    -DAPP_VERSION=\"1.0.0\"
    ; Baltic Shoreline Monitor configuration
    -DBALTIC_SHORELINE_MONITOR=1
    ; LoRa frequency for Europe (433MHz)
    -DLORA_FREQUENCY=433.0
    ; Memory optimizations
    -DCONFIG_ARDUHAL_LOG_DEFAULT_LEVEL=1
    ; Power management
    -DESP32_POWER_MANAGEMENT=1

; Upload configuration
upload_protocol = esptool
upload_port = COM*
